<div class="modal-overlay" *ngIf="isOpen" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ plan ? 'Editar Plan' : 'Crear Nuevo Plan' }}</h2>
      <button class="close-btn" (click)="onClose()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Nombre del Plan *</label>
        <input 
          type="text" 
          [(ngModel)]="formData.name"
          placeholder="ej: Plan Premium"
          class="form-input">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Precio *</label>
          <div class="price-input">
            <input 
              type="number" 
              [(ngModel)]="formData.price"
              placeholder="0"
              min="0"
              class="form-input">
            <select [(ngModel)]="formData.currency" class="form-select">
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="MXN">MXN</option>
              <option value="COP">COP</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Usuarios Máximos *</label>
          <input 
            type="number" 
            [(ngModel)]="formData.max_users"
            placeholder="1"
            min="1"
            class="form-input">
        </div>
      </div>

      <div class="form-group">
        <label>Estado</label>
        <select [(ngModel)]="formData.status" class="form-select">
          <option value="active">Activo</option>
          <option value="inactive">Inactivo</option>
        </select>
      </div>

      <div class="form-group">
        <label>Características *</label>
        <div class="features-input">
          <input 
            type="text" 
            [(ngModel)]="newFeature"
            (keyup.enter)="addFeature()"
            placeholder="Escribe una característica y presiona Enter"
            class="form-input">
          <button 
            type="button" 
            (click)="addFeature()"
            class="btn-add-feature">
            <i class="bi bi-plus-circle"></i>
          </button>
        </div>

        <div class="features-list">
          <div class="feature-tag" *ngFor="let feature of formData.features; let i = index">
            <span>{{ feature }}</span>
            <button 
              type="button"
              (click)="removeFeature(i)"
              class="btn-remove">
              <i class="bi bi-x"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="onClose()">Cancelar</button>
      <button 
        class="btn-save"
        [disabled]="!isFormValid()"
        (click)="onSave()">
        {{ plan ? 'Actualizar' : 'Crear' }} Plan
      </button>
    </div>
  </div>
</div>
